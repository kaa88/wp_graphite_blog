function setCookie(e={},t){if(!e.name||!e.value)return console.log('Error: Required cookie "name" or "value" is missing.');let s=[];if(s.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)),e.expires){let t=new Date;t.setTime(t.getTime()+24*e.expires*60*60*1e3),s.push("expires="+t.toUTCString())}let i=Object.entries(e);for(let e=0;e<i.length;e++)"name"!=i[e][0]&&"value"!=i[e][0]&&"expires"!=i[e][0]&&s.push(i[e][0]+(i[e][1]?"="+i[e][1]:""));let o=s.join("; ");document.cookie=o,t&&console.log("Setting up cookie: "+o)}function getCookie(){let e=decodeURIComponent(document.cookie).split("; "),t={};for(let s=0;s<e.length;s++){let i=e[s].split("=");t[i[0]]=i[1]}return t}let cookies=getCookie(),pageOptions={themePrefix:"theme-",themeName:"dark",themeTimer:1e3,langPrefix:"lang-",langName:"ru",setOpt:function(e){e&&document.body.classList.toggle(e)}};function setupControls(){let e=document.querySelector(".controls__theme");e&&e.addEventListener("click",(()=>{transitionLock.check(pageOptions.themeTimer)||(pageOptions.setOpt(pageOptions.themePrefix+pageOptions.themeName),cookies&&cookies.cookies_accepted&&(document.body.classList.contains("theme-dark")?setCookie({name:"theme",value:pageOptions.themeName,expires:365}):setCookie({name:"theme",value:pageOptions.themeName,expires:-1})))}));let t=document.querySelector(".controls__lang");t&&t.addEventListener("click",(()=>{transitionLock.check(1e3)||pageOptions.setOpt(pageOptions.langPrefix+pageOptions.langName)}))}cookies&&(cookies.theme&&pageOptions.setOpt(pageOptions.themePrefix+cookies.theme),cookies.lang&&pageOptions.setOpt(pageOptions.langPrefix+cookies.lang)),setupControls();const loadscreen={init:function(e={}){if(this.elem=document.querySelector(".loadscreen"),!this.elem)return;let t=this;document.body.classList.add("_locked"),window.addEventListener("load",(()=>{setTimeout((()=>{document.body.classList.remove("_locked"),e.scrollToTop&&window.scrollTo({top:0,behavior:"instant"}),t.elem.classList.remove("_locked")}),e.timeout||0)}))}};loadscreen.init({timeout:1e3});const jsMediaQueries={init:function(e={}){if(this.mobile=parseFloat(getComputedStyle(document.body).getPropertyValue("--media-mobile"))||768,this.breakpoints=e.breakpoints||null,this.breakpoints){this.breakpoints.keys=Object.keys(this.breakpoints);for(let e=0;e<this.breakpoints.keys.length;e++)this.breakpoints.keys[e]=Number(this.breakpoints.keys[e]);this.breakpoints.keys.push(0),this.breakpoints.keys.sort(((e,t)=>e-t)),window.addEventListener("resize",this.check.bind(this)),this.check(0,!0)}},check:function(e,t=!1){for(let e=0;e<this.breakpoints.keys.length&&window.innerWidth>this.breakpoints.keys[e];e++)this.state=this.breakpoints.keys[e];t&&(this.prev_state=this.state),this.state==this.prev_state||t||(this.state>this.prev_state?this.breakpoints[this.state]():this.breakpoints[this.prev_state](),this.prev_state=this.state)}};jsMediaQueries.init({breakpoints:{568:()=>{},782:()=>{},1228:()=>{}}});const scrollLock={refs:{mobile:jsMediaQueries.mobile},defaultElems:["main","footer"],paddingItemClassName:"scroll-lock-item-p",paddingMenuItemClassName:"scroll-lock-item-pm",marginItemClassName:"scroll-lock-item-m",lockedClassName:"_locked",init:function(e={}){if(this.paddingItems=document.querySelectorAll("."+this.paddingItemClassName),this.paddingMenuItems=document.querySelectorAll("."+this.paddingMenuItemClassName),this.marginItems=document.querySelectorAll("."+this.marginItemClassName),!1===e.useDefaultGroups||"false"===e.useDefaultGroups?this.useDefaultGroups=!1:this.useDefaultGroups=!0,this.useDefaultGroups){let e="";for(let t=0;t<this.defaultElems.length;t++)e+="."+this.defaultElems[t]+">*",t<this.defaultElems.length-1&&(e+=",");let t=document.querySelectorAll(e),s=Array.from(t);for(let e=0;e<this.paddingItems.length;e++){let i=!1;for(let s=0;s<t.length;s++)t[s]==this.paddingItems[e]&&(i=!0);i||s.push(this.paddingItems[e])}this.paddingItems=s}},lock:function(){if(document.body.classList.contains(this.lockedClassName))return;this.scrollbarWidth=window.innerWidth-document.body.offsetWidth;let e=this;function t(t,s){for(let i=0;i<t.length;i++)t[i][s]=parseFloat(getComputedStyle(t[i])[s]),t[i].style[s]=t[i][s]+e.scrollbarWidth+"px"}window.innerWidth>this.refs.mobile&&t(this.paddingMenuItems,"paddingRight"),t(this.paddingItems,"paddingRight"),t(this.marginItems,"marginRight"),document.body.classList.add(this.lockedClassName)},unlock:function(e=0){let t=this;setTimeout((()=>{function e(e,t){for(let s=0;s<e.length;s++)e[s].style[t]=""}e(this.paddingMenuItems,"paddingRight"),e(this.paddingItems,"paddingRight"),e(this.marginItems,"marginRight"),document.body.classList.remove(t.lockedClassName)}),e)}};scrollLock.init();const transitionLock={locked:!1,check:function(e=0){let t=this,s=this.locked;return 0==t.locked&&(t.locked=!0,setTimeout((function(){t.locked=!1}),e)),s}},modal={refs:{translock:transitionLock,scrlock:scrollLock},init:function(e={}){if(this.elemName=e.elem||"modal",this.elem=document.querySelector("."+this.elemName),!this.elem)return;this.timeout=1e3*parseFloat(getComputedStyle(document.body).getPropertyValue("--timer-modal"))||0,this.windows=this.elem.querySelectorAll("."+this.elemName+"__window"),this.links=document.querySelectorAll(e.linkName?"."+e.linkName:".modal-link");for(let e=0;e<this.links.length;e++)this.links[e].addEventListener("click",this.open.bind(this));this.elem.addEventListener("click",function(e){e.target.closest("."+this.elemName+"__wrapper")||this.closeAll()}.bind(this));let t=this.elem.querySelectorAll("."+this.elemName+"__close-button");for(let e=0;e<t.length;e++)t[e].addEventListener("click",this.closeThis.bind(this));this.on=e.on||{}},open:function(e){if(this.refs.translock.check(this.timeout))return;e.preventDefault();let t=this.elem.querySelector(e.currentTarget.getAttribute("href"));t.classList.add("_open"),this.on[t.id]&&this.on[t.id].open&&this.on[t.id].open(e,t.querySelector("."+this.elemName+"__content > *:not(."+this.elemName+"__close-button)"),this.timeout),modal.check()},closeThis:function(e){if(this.refs.translock.check(this.timeout))return;let t=e.target.closest("."+this.elemName+"__window");t.classList.remove("_open"),this.on[t.id]&&this.on[t.id].close&&this.on[t.id].close(e,t.querySelector("."+this.elemName+"__content > *:not(."+this.elemName+"__close-button)"),this.timeout),modal.check()},closeAll:function(){if(!this.refs.translock.check(this.timeout)){for(let e=0;e<this.windows.length;e++)this.windows[e].classList.contains("_open")&&(this.windows[e].classList.remove("_open"),this.on[this.windows[e].id]&&this.on[this.windows[e].id].close&&this.on[this.windows[e].id].close(0,0,this.timeout));modal.check()}},check:function(){let e=0;for(let t=0;t<this.windows.length;t++)this.windows[t].classList.contains("_open")&&e++;e?(this.elem.classList.add("_visible"),this.refs.scrlock.lock()):(this.elem.classList.remove("_visible"),this.refs.scrlock.unlock(this.timeout))}};modal.init();class Popup{constructor(e={}){if(this.elemName=e.elem||"popup",this.elem=document.querySelector("."+this.elemName),!this.elem)return;this.isLoaded=!0;let t=this.elem.querySelector(".popup__close-btn");t&&t.addEventListener("click",this.close.bind(this))}open(){this.isLoaded&&this.elem.classList.add("_visible")}close(){this.isLoaded&&this.elem.classList.remove("_visible")}}let test_popup=new Popup({});const cookieAlert={popup:test_popup,aboutLink:document.querySelector(".cookie-alert__link"),closeButton:document.querySelector(".cookie-alert__close"),acceptButton:document.querySelector(".cookie-alert__accept"),init:function(){cookies&&"true"!=cookies.cookies_accepted&&this.popup.open(),this.aboutLink&&this.aboutLink.addEventListener("click",(function(){this.closest(".cookie-alert").classList.add("_opened")})),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.popup.close()})),this.acceptButton&&this.acceptButton.addEventListener("click",(()=>{setCookie({name:"cookies_accepted",value:"true",path:"/",expires:365}),this.popup.close()}))}};window.addEventListener("load",(()=>{setTimeout((()=>{cookieAlert.init()}),2e3)}));const spoiler={names:{spoiler:".spoiler",wrapper:".spoiler__wrapper"},init:function(){if(this.wrappers=document.querySelectorAll(this.names.wrapper),0==this.wrappers.length)return;this.calcHeight();let e=this;window.addEventListener("load",(()=>{for(let t=0;t<e.wrappers.length;t++)e.wrappers[t].closest(e.names.spoiler).children[0].addEventListener("click",e.toggle.bind(e));e.calcHeight(),window.addEventListener("resize",e.calcHeight.bind(e))}))},calcHeight:function(){let e=!1;for(let t=0;t<this.wrappers.length;t++){let s=this.wrappers[t].children[0].offsetHeight;s!=this.wrappers[t].itemMaxHeight&&(e=!0),this.wrappers[t].itemMaxHeight=s}e&&this.setHeight()},setHeight(){for(let e=0;e<this.wrappers.length;e++)this.wrappers[e].closest(this.names.spoiler).classList.contains("_visible")?this.wrappers[e].style.height=this.wrappers[e].itemMaxHeight+"px":this.wrappers[e].style.height=""},toggle:function(e){e.currentTarget.parentElement.classList.toggle("_visible"),this.setHeight()}};spoiler.init();