const mobileSwitchWidth=parseFloat(getComputedStyle(document.body).getPropertyValue("--media-mobile"))||768;function setCookie(e={},t){if(!e.name||!e.value)return console.log('Error: Required cookie "name" or "value" is missing.');let i=[];if(i.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)),i.push("path="+(e.path?e.path:"/")),e.expires){let t=new Date;t.setTime(t.getTime()+24*e.expires*60*60*1e3),i.push("expires="+t.toUTCString())}let s=Object.entries(e);for(let e=0;e<s.length;e++)"name"!=s[e][0]&&"value"!=s[e][0]&&"path"!=s[e][0]&&"expires"!=s[e][0]&&i.push(s[e][0]+(s[e][1]?"="+s[e][1]:""));let o=i.join("; ");document.cookie=o,t&&console.log("Setting up cookie: "+o)}function getCookie(){let e=decodeURIComponent(document.cookie).split("; "),t={};for(let i=0;i<e.length;i++){let s=e[i].split("=");t[s[0]]=s[1]}return t}let cookies=getCookie(),pageOptions={themePrefix:"theme-",themeName:"dark",themeTimer:1e3,langPrefix:"lang-",langName:"ru",setOpt:function(e){e&&document.body.classList.toggle(e)}};function setupControls(){let e=document.querySelector(".controls__theme");e&&e.addEventListener("click",(()=>{transitionLock.check(pageOptions.themeTimer)||(pageOptions.setOpt(pageOptions.themePrefix+pageOptions.themeName),setTimeout((()=>{cookies&&(cookies.cookies_accepted?document.body.classList.contains("theme-dark")?setCookie({name:"theme",value:pageOptions.themeName,expires:365}):setCookie({name:"theme",value:pageOptions.themeName,expires:-1}):document.body.classList.contains("theme-dark")?setCookie({name:"theme",value:pageOptions.themeName}):setCookie({name:"theme",value:pageOptions.themeName,expires:-1}))}),100))}))}cookies&&(cookies.theme&&pageOptions.setOpt(pageOptions.themePrefix+cookies.theme),cookies.lang&&pageOptions.setOpt(pageOptions.langPrefix+cookies.lang)),setupControls();const loadscreen={init:function(e={}){if(this.elem=document.querySelector(".loadscreen"),!this.elem)return;let t=this;document.body.classList.add("_locked"),window.addEventListener("load",(()=>{setTimeout((()=>{document.body.classList.remove("_locked"),e.scrollToTop&&window.scrollTo({top:0,behavior:"instant"}),t.elem.classList.remove("_locked")}),e.timeout||0)}))}};let loadscreenTimer=0;cookies&&cookies.theme&&(loadscreenTimer=800),loadscreen.init({timeout:loadscreenTimer});const scrollLock={refs:{mobile:mobileSwitchWidth},defaultElems:["main","footer"],paddingItemClassName:"scroll-lock-item-p",paddingMenuItemClassName:"scroll-lock-item-pm",marginItemClassName:"scroll-lock-item-m",lockedClassName:"_locked",init:function(e={}){if(this.paddingItems=document.querySelectorAll("."+this.paddingItemClassName),this.paddingMenuItems=document.querySelectorAll("."+this.paddingMenuItemClassName),this.marginItems=document.querySelectorAll("."+this.marginItemClassName),!1===e.useDefaultGroups||"false"===e.useDefaultGroups?this.useDefaultGroups=!1:this.useDefaultGroups=!0,this.useDefaultGroups){let e="";for(let t=0;t<this.defaultElems.length;t++)e+="."+this.defaultElems[t]+">*",t<this.defaultElems.length-1&&(e+=",");let t=document.querySelectorAll(e),i=Array.from(t);for(let e=0;e<this.paddingItems.length;e++){let s=!1;for(let i=0;i<t.length;i++)t[i]==this.paddingItems[e]&&(s=!0);s||i.push(this.paddingItems[e])}this.paddingItems=i}},lock:function(){if(document.body.classList.contains(this.lockedClassName))return;this.scrollbarWidth=window.innerWidth-document.body.offsetWidth;let e=this;function t(t,i){for(let s=0;s<t.length;s++)t[s][i]=parseFloat(getComputedStyle(t[s])[i]),t[s].style[i]=t[s][i]+e.scrollbarWidth+"px"}window.innerWidth>this.refs.mobile&&t(this.paddingMenuItems,"paddingRight"),t(this.paddingItems,"paddingRight"),t(this.marginItems,"marginRight"),document.body.classList.add(this.lockedClassName)},unlock:function(e=0){let t=this;setTimeout((()=>{function e(e,t){for(let i=0;i<e.length;i++)e[i].style[t]=""}e(this.paddingMenuItems,"paddingRight"),e(this.paddingItems,"paddingRight"),e(this.marginItems,"marginRight"),document.body.classList.remove(t.lockedClassName)}),e)}};scrollLock.init();const transitionLock={locked:!1,check:function(e=0){let t=this,i=this.locked;return 0==t.locked&&(t.locked=!0,setTimeout((function(){t.locked=!1}),e)),i}},header={refs:{mobile:mobileSwitchWidth,translock:transitionLock,scrlock:scrollLock},names:{elemAboveHeader:"#wpadminbar",header:".header",menu:".header-menu-hide-wrapper",menuItems:".header-menu__items",menuItem:".header-menu__item",menuOpenBtn:".header-menu-open-btn",menuCloseBtn:".header-menu-close-btn",menuBackBtn:".header-submenu-back-btn",menuArea:".header-menu-turn-off-area",menuOptions:"#header-menu-options",submenu:".header-submenu-hide-wrapper",submenuDropLink:".submenu-drop-link",noheader:"header--empty",thisPageClass:"this-page",varTimer:"--timer-menu",varHeight:"--header-height",varTop:"--header-offset-top",varTopDef:"--header-offset-top-default"},init:function(e={}){this.headerElem=document.querySelector(this.names.header),this.headerElem||(this.headerElem=document.createElement("header"),this.headerElem.className=this.names.noheader,document.body.prepend(this.headerElem));let t=1e3*parseFloat(getComputedStyle(document.body).getPropertyValue(this.names.varTimer))||0;this.headerHeight=this.headerHeightPrev=this.headerOffsetTop=this.headerOffsetTopPrev=this.headerOffsetTopDefault=this.headerOffsetTopDefaultPrev=0;let i=document.querySelector(this.names.elemAboveHeader);e.elemAboveHeader&&i?this.elemAboveHeader=i:this.elemAboveHeader=!1,this.calcHeaderHeight(),window.addEventListener("resize",this.calcHeaderHeight.bind(this)),e.menu&&this.menu.init(this,t,this.names),e.submenu&&this.submenu.init(this,t,this.names),e.hidingHeader&&window.addEventListener("load",(()=>this.hidingHeader.init(this)))},calcHeaderHeight:function(){this.headerHeight=parseFloat(getComputedStyle(this.headerElem).height),this.elemAboveHeader?this.headerOffsetTopDefault=this.headerOffsetTop=parseFloat(getComputedStyle(this.elemAboveHeader).height):this.headerOffsetTopDefault=this.headerOffsetTop=0,this.setCssVar(),this.hidingHeader.calc()},setCssVar:function(){this.headerHeight!=this.headerHeightPrev&&(document.body.style.setProperty(this.names.varHeight,this.headerHeight+"px"),this.headerHeightPrev=this.headerHeight),this.headerOffsetTop!=this.headerOffsetTopPrev&&(document.body.style.setProperty(this.names.varTop,this.headerOffsetTop+"px"),this.headerOffsetTopPrev=this.headerOffsetTop),this.headerOffsetTopDefault!=this.headerOffsetTopDefaultPrev&&(document.body.style.setProperty(this.names.varTopDef,this.headerOffsetTopDefault+"px"),this.headerOffsetTopDefaultPrev=this.headerOffsetTopDefault)},mobileViewService:function(){this.menu.toggle(),this.menu.hideOnViewChange()},menu:{isLoaded:!1,init:function(e,t,i){this.isLoaded=!0,this.root=e,this.timeout=t,this.menuElem=this.root.headerElem.querySelector(i.menu),this.buttons=this.root.headerElem.querySelectorAll(`${i.menuOpenBtn}, ${i.menuCloseBtn}, ${i.menuArea}`);let s=this.menuElem.querySelector(i.menuItems),o={};if("undefined"!=typeof headerMenuOptions&&(o=headerMenuOptions),o.links){let e={};for(let t=0;t<s.children.length;t++)e[s.children[t].dataset.name]=s.children[t];s.innerHTML="";for(let t=0;t<o.links.length;t++)s.appendChild(e[o.links[t]])}if(o.activeLink)for(let e=0;e<s.children.length;e++)if(s.children[e].dataset.name==o.activeLink){s.children[e].firstElementChild.classList.add(i.thisPageClass);break}o.elem=document.querySelector(i.menuOptions),o.elem&&o.elem.parentElement.removeChild(o.elem);for(let e=0;e<this.buttons.length;e++)this.buttons[e].addEventListener("click",this.toggle.bind(this))},toggle:function(e){if(this.isLoaded&&!this.root.refs.translock.check(this.timeout))if(this.menuElem.classList.contains("_active")){this.menuElem.classList.remove("_active");for(let e=0;e<this.buttons.length;e++)this.buttons[e].classList.remove("_active");this.root.refs.scrlock.unlock(this.timeout),this.root.submenu.closeAll()}else if(e){this.menuElem.classList.add("_active");for(let e=0;e<this.buttons.length;e++)this.buttons[e].classList.add("_active");this.root.refs.scrlock.lock(),this.root.hidingHeader.scroll(0,!0)}},hideOnViewChange:function(){if(this.isLoaded){let e=this;this.menuElem.style.display="none",setTimeout((()=>{e.menuElem.style.display="",e.root.calcHeaderHeight()}),e.timeout)}}},submenu:{isLoaded:!1,init:function(e,t,i){if(this.isLoaded=!0,this.root=e,this.timeout=t,this.sMenuElems=this.root.headerElem.querySelectorAll(i.submenu),0!=this.sMenuElems.length){this.links=this.root.headerElem.querySelectorAll(i.submenuDropLink),this.backButtons=this.root.headerElem.querySelectorAll(i.menuBackBtn),this.links[0]&&(this.links[0].closest(i.menuItem).querySelector(i.submenu)?this.isOutside=!1:this.isOutside=!0);for(let e=0;e<this.backButtons.length;e++)this.backButtons[e].addEventListener("click",this.toggle.bind(this));for(let e=0;e<this.links.length;e++)this.links[e].addEventListener("click",this.toggle.bind(this)),this.links[e].addEventListener("mouseover",this.toggle.bind(this)),this.isOutside||this.links[e].closest(i.menuItem).addEventListener("mouseleave",this.toggle.bind(this));this.isOutside&&this.root.headerElem.addEventListener("mouseleave",this.toggle.bind(this))}else console.log("Error: No submenu detected")},toggle:function(e){if(!e)return;let t=this,i=!1;function s(i){let s=t.root.names[i];return s.match(/[#.]/)&&(s=s.substring(1)),e.currentTarget.classList.contains(s)}window.innerWidth<=this.root.refs.mobile&&(i=!0),i?"click"==e.type&&(s("submenuDropLink")&&this.open(e,i),s("menuBackBtn")&&this.close(e,i)):("mouseover"==e.type&&s("submenuDropLink")&&this.open(e,i),"mouseleave"==e.type&&(s("menuItem")||s("header"))&&this.close(e,i))},open:function(e,t){if(e.preventDefault(),!t||!this.root.refs.translock.check(this.timeout))if(this.isOutside){for(let e=0;e<this.links.length;e++)this.links[e].classList.add("_active");for(let e=0;e<this.sMenuElems.length;e++)this.sMenuElems[e].classList.add("_active")}else e.currentTarget.classList.add("_active"),e.currentTarget.nextElementSibling.classList.add("_active")},close:function(e,t){if(!t||!this.root.refs.translock.check(this.timeout))if(this.isOutside){let e=this.root.headerElem.querySelectorAll(`${this.root.names.menuItem} ._active, ${this.root.names.submenu}._active`);for(let t=0;t<e.length;t++)e[t].classList.remove("_active")}else{let t=e.currentTarget.closest(this.root.names.submenu).parentElement;for(let e=0;e<t.children.length;e++)t.children[e].classList.remove("_active")}},closeAll:function(){if(this.isLoaded){for(let e=0;e<this.links.length;e++)this.links[e].classList.remove("_active");for(let e=0;e<this.sMenuElems.length;e++)this.sMenuElems[e].classList.remove("_active")}}},hidingHeader:{isLoaded:!1,init:function(e){this.isLoaded=!0,this.root=e,this.hiddenPositionOffset=0,this.firstScroll=!0,window.addEventListener("scroll",this.scroll.bind(this))},calc:function(){this.isLoaded&&(this.Y=this.YPrev=pageYOffset,this.diff=0,this.currentPos=this.root.headerOffsetTopDefault)},scroll:function(e,t){if(!this.isLoaded)return;if(window.innerWidth>this.root.refs.mobile)return;if(this.firstScroll)return this.firstScroll=!1,void this.calc();if(t)return this.currentPos=this.root.headerOffsetTop=this.root.headerOffsetTopDefault,void this.root.setCssVar();(pageYOffset<this.Y+this.diff&&this.Y>this.YPrev||pageYOffset>this.Y+this.diff&&this.Y<this.YPrev)&&(this.diff=pageYOffset-this.Y);let i=this.root.headerOffsetTop,s=this.root.headerOffsetTopDefault,o=s-this.root.headerHeight-this.hiddenPositionOffset;this.YPrev=this.Y,this.Y=pageYOffset-this.diff,i-=this.Y-this.YPrev,i>s&&(i=s),i<o&&(i=o),this.root.headerOffsetTop=i,this.root.setCssVar()}}};header.init({elemAboveHeader:!0});const footer={init:function(){this.footerElem=document.querySelector(".footer"),this.footerElem&&(this.footerHeight=this.footerHeightPrev=0,this.calcFooterHeight(),window.addEventListener("resize",this.calcFooterHeight.bind(this)))},calcFooterHeight:function(){this.footerHeight=this.footerElem.offsetHeight,this.footerHeight!=this.footerHeightPrev&&(document.body.style.setProperty("--footer-height",this.footerHeight+"px"),this.footerHeightPrev=this.footerHeight)}};footer.init();const modal={refs:{translock:transitionLock,scrlock:scrollLock},init:function(e={}){if(this.elemName=e.elem||"modal",this.elem=document.querySelector("."+this.elemName),!this.elem)return;this.timeout=1e3*parseFloat(getComputedStyle(document.body).getPropertyValue("--timer-modal"))||0,this.windows=this.elem.querySelectorAll("."+this.elemName+"__window"),this.links=document.querySelectorAll(e.linkName?"."+e.linkName:".modal-link");for(let e=0;e<this.links.length;e++)this.links[e].addEventListener("click",this.open.bind(this));this.elem.addEventListener("click",function(e){e.target.closest("."+this.elemName+"__wrapper")||this.closeAll()}.bind(this));let t=this.elem.querySelectorAll("."+this.elemName+"__close-button");for(let e=0;e<t.length;e++)t[e].addEventListener("click",this.closeThis.bind(this));this.on=e.on||{}},open:function(e){if(this.refs.translock.check(this.timeout))return;e.preventDefault();let t=this.elem.querySelector(e.currentTarget.getAttribute("href"));t.classList.add("_open"),this.on[t.id]&&this.on[t.id].open&&this.on[t.id].open(e,t.querySelector("."+this.elemName+"__content > *:not(."+this.elemName+"__close-button)"),this.timeout),modal.check()},closeThis:function(e){if(this.refs.translock.check(this.timeout))return;let t=e.target.closest("."+this.elemName+"__window");t.classList.remove("_open"),this.on[t.id]&&this.on[t.id].close&&this.on[t.id].close(e,t.querySelector("."+this.elemName+"__content > *:not(."+this.elemName+"__close-button)"),this.timeout),modal.check()},closeAll:function(){if(!this.refs.translock.check(this.timeout)){for(let e=0;e<this.windows.length;e++)this.windows[e].classList.contains("_open")&&(this.windows[e].classList.remove("_open"),this.on[this.windows[e].id]&&this.on[this.windows[e].id].close&&this.on[this.windows[e].id].close(0,0,this.timeout));modal.check()}},check:function(){let e=0;for(let t=0;t<this.windows.length;t++)this.windows[t].classList.contains("_open")&&e++;e?(this.elem.classList.add("_visible"),this.refs.scrlock.lock()):(this.elem.classList.remove("_visible"),this.refs.scrlock.unlock(this.timeout))}};modal.init();class Popup{constructor(e={}){if(this.elemName=e.elem||"popup",this.elem=document.querySelector("."+this.elemName),!this.elem)return;this.isLoaded=!0;let t=this.elem.querySelector(".popup__close-btn");t&&t.addEventListener("click",this.close.bind(this))}open(){this.isLoaded&&this.elem.classList.add("_visible")}close(){this.isLoaded&&this.elem.classList.remove("_visible")}}let test_popup=new Popup({});const cookieAlert={popup:test_popup,aboutLink:document.querySelector(".cookie-alert__link"),closeButton:document.querySelector(".cookie-alert__close"),acceptButton:document.querySelector(".cookie-alert__accept"),init:function(){cookies&&"true"!=cookies.cookies_accepted&&this.popup.open(),this.aboutLink&&this.aboutLink.addEventListener("click",(function(){this.closest(".cookie-alert").classList.add("_opened")})),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.popup.close()})),this.acceptButton&&this.acceptButton.addEventListener("click",(()=>{setCookie({name:"cookies_accepted",value:"true",expires:365}),this.popup.close()}))}};window.addEventListener("load",(()=>{setTimeout((()=>{cookieAlert.init()}),2e3)}));const spoiler={names:{spoiler:".spoiler",wrapper:".spoiler__wrapper"},init:function(){if(this.wrappers=document.querySelectorAll(this.names.wrapper),0==this.wrappers.length)return;this.calcHeight();let e=this;window.addEventListener("load",(()=>{for(let t=0;t<e.wrappers.length;t++)e.wrappers[t].closest(e.names.spoiler).children[0].addEventListener("click",e.toggle.bind(e));e.calcHeight(),window.addEventListener("resize",e.calcHeight.bind(e))}))},calcHeight:function(){let e=!1;for(let t=0;t<this.wrappers.length;t++){let i=this.wrappers[t].children[0].offsetHeight;i!=this.wrappers[t].itemMaxHeight&&(e=!0),this.wrappers[t].itemMaxHeight=i}e&&this.setHeight()},setHeight(){for(let e=0;e<this.wrappers.length;e++)this.wrappers[e].closest(this.names.spoiler).classList.contains("_visible")?this.wrappers[e].style.height=this.wrappers[e].itemMaxHeight+"px":this.wrappers[e].style.height=""},toggle:function(e){e.currentTarget.parentElement.classList.toggle("_visible"),this.setHeight()}};spoiler.init();